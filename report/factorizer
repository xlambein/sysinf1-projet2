for i = start, i*i <= toFact, i += step:

    if i divides toFact:

        lock mut_toFact
            if i divides toFact:
                lock mut_stacks
                    push i to stack
                unlock mut_stacks
                post sem_full
                divide toFact by i
            end
        unlock mut_toFact

    end

end
